!function(a){"use strict";a.module("mvd.contentfulProvider",[]).provider("contentful",function(){var b,c=!1,d=[].push,e=[].slice,f=function(){if(c){var a=e.call(arguments,0);b.debug.apply(b,a)}},g={accessToken:"",space:""},h={},i={},j=this;j.setAuth=function(b,c){return a.isObject(b)?a.extend(g,b):(g.accessToken=b,g.space=c),j},j.setDebug=function(a){c=a},j.setQueryOptions=function(a){i=a};var k=function(b){return a.extend({},i,b)};j.normalizeItems=function(b){if(!b)return b;for(var c=[],d=["id","type","updatedAt","createdAt"],e=0,f=b.length;f>e;e++){for(var g=b[e],h=g.sys,i=a.copy(g.fields),j=0,k=d.length;k>j;j++){var l=d[j];a.isUndefined(i[l])&&a.isDefined(h[l])&&(i[l]=h[l])}c.push(i)}return c};var l=function(a){return this._client=a,this};return l.prototype={get:function(b,c,d){f("[get]",arguments);var e={},g=k({"sys.id":b,limit:1});return this._client.entries(g).then(function(b){f("[get] success",b),a.extend(e,j.normalizeItems(b)[0]),c&&c(e)},function(a){f("[get] error",a),d&&d(a)}),e},load:function(a,b,c){f("[load]",arguments),a=k(a);var e=[];return this._client.entries(a).then(function(a){f("[load] success",a),d.apply(e,j.normalizeItems(a)),b&&b(e)},function(a){f("[load] error",a),c&&c(a)}),e}},this.$get=["$log","$window",function(c,d){if(b=c,!d.contentful)return c.warn("Contentful API client not loaded, unable to initialize ContentfulProvider"),null;var e=a.extend({},g,h),f=d.contentful.createClient(e);return new l(f)}],this})}(angular);